<div class="header-row">
  <div class="filters">
    <mat-form-field appearance="outline" color="primary" class="field">
      <mat-label>Type</mat-label>
      <mat-select [value]="type()" (selectionChange)="type.set($event.value)">
        <mat-option value="All">All</mat-option>
        <mat-option value="Activity">Activities</mat-option>
        <mat-option value="Order">Orders</mat-option>
        <mat-option value="Quote">Quotes</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" color="primary" class="field" *ngIf="!scopeUserId">
      <mat-label>Owner</mat-label>
      <mat-select [value]="owner()" (selectionChange)="owner.set($event.value)">
        <mat-option value="ALL">All</mat-option>
        <mat-option value="rep-001">rep-001</mat-option>
        <mat-option value="rep-002">rep-002</mat-option>
        <mat-option value="rep-003">rep-003</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div class="actions">
    <button mat-stroked-button color="primary" (click)="export()">
      <mat-icon>download</mat-icon>
      Export
    </button>
  </div>
</div>

<div class="table-wrap">
  <table mat-table [dataSource]="rows()" class="mat-elevation-z1">
    <!-- Select -->
    <ng-container matColumnDef="select">
      <th mat-header-cell *matHeaderCellDef>
        <mat-icon class="select-all" (click)="masterToggle()">
          {{ isAllSelected() ? 'check_box' : 'check_box_outline_blank' }}
        </mat-icon>
      </th>
      <td mat-cell *matCellDef="let row">
        <mat-icon (click)="selection.toggle(row)">
          {{ selection.isSelected(row) ? 'check_box' : 'check_box_outline_blank' }}
        </mat-icon>
      </td>
    </ng-container>

    <!-- Type -->
    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef>Type</th>
      <td mat-cell *matCellDef="let r">{{ r.type }}</td>
    </ng-container>

    <!-- Owner -->
    <ng-container matColumnDef="owner">
      <th mat-header-cell *matHeaderCellDef>Owner</th>
      <td mat-cell *matCellDef="let r">{{ r.owner }}</td>
    </ng-container>

    <!-- Subject -->
    <ng-container matColumnDef="subject">
      <th mat-header-cell *matHeaderCellDef>Subject</th>
      <td mat-cell *matCellDef="let r" class="muted">{{ r.subject }}</td>
    </ng-container>

    <!-- Date -->
    <ng-container matColumnDef="date">
      <th mat-header-cell *matHeaderCellDef class="right">Date</th>
      <td mat-cell *matCellDef="let r" class="right">{{ r.date }}</td>
    </ng-container>

    <!-- Value -->
    <ng-container matColumnDef="value">
      <th mat-header-cell *matHeaderCellDef class="right">Value</th>
      <td mat-cell *matCellDef="let r" class="right">{{ r.value ? ('$'+r.value) : 'â€”' }}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns" class="sticky"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>
